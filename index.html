<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>歷史英靈：策略對決</title>
    <link rel="stylesheet" href="style.css?v=123">
</head>
<body>

    <audio id="bgm" loop><source src="assets/sounds/bgm.mp3" type="audio/mpeg"></audio>
    <audio id="bgm-battle" loop><source src="assets/sounds/bgm-battle.mp3" type="audio/mpeg"></audio>
    
    <audio id="sfx-draw"><source src="assets/sounds/draw.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-ssr"><source src="assets/sounds/ssr.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-reveal"><source src="assets/sounds/reveal.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-coin"><source src="assets/sounds/coin.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-upgrade"><source src="assets/sounds/upgrade.mp3" type="audio/mpeg"></audio>
    
    <div class="game-container">
        <h1>⚔️ 歷史英靈：策略對決</h1>

        <div id="login-section">
            <h3>請先登入以保存進度</h3>
            <input type="email" id="email-input" placeholder="電子郵件">
            <input type="password" id="pass-input" placeholder="密碼">
            <br>
            <button id="email-login-btn" class="btn-primary">📧 登入</button>
            <button id="email-signup-btn" class="btn-secondary">📝 註冊</button>
            <hr>
            <button id="guest-btn" class="btn-secondary">👤 遊客試玩 (不存檔)</button>
        </div>

        <div id="user-info" style="display: none;">
            <div style="display:flex; justify-content:space-between; align-items:center; width:100%;">
                <span id="user-name">玩家：載入中...</span>
                <div style="display:flex; align-items:center; gap:10px;">
                    <div id="notification-btn" class="btn-secondary" style="padding: 5px 10px; font-size: 1.2em; position: relative; cursor: pointer;">
                        🔔
                        <div id="notif-badge" class="notification-badge hidden">0</div>
                    </div>
                    <button id="settings-btn" class="btn-secondary" style="padding: 5px 10px; font-size: 1.2em;">⚙️</button>
                    <button id="logout-btn" class="btn-danger" style="padding: 5px 10px; font-size: 0.9em;">登出</button>
                </div>
            </div>
            <div class="status-bar">
                💎 <span id="gem-count">0</span> | 💰 <span id="gold-count">0</span>
                <div id="power-display" style="font-size: 0.9em; color: #f1c40f; margin-top: 5px;">🔥 戰力: 0</div>
            </div>

            <div class="menu-bar" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 20px;">
                <button id="inventory-btn" class="btn-primary">🎒 我的背包</button>
                <button id="enter-battle-mode-btn" class="btn-danger">⚔️ 戰役模式</button>
                <button id="pvp-menu-btn" class="btn-danger" style="background: #8e44ad; border-color: #9b59b6;">🏆 PVP 競技場</button>
                
                <button id="territory-menu-btn" class="btn-primary" style="background: #27ae60; border-color: #2ecc71;">🏰 領地建設</button>
                
                <button id="gallery-btn" class="btn-secondary">📖 圖鑑</button>
            </div>

            <div class="gacha-section">
                <button id="draw-btn" class="btn-primary">
                    <span>🔮 單抽</span>
                    <span style="font-size: 0.8em; opacity: 0.8;">(100鑽)</span>
                </button>
                <button id="draw-10-btn" class="btn-secondary">
                    <span>🔥 十連抽</span>
                    <span style="font-size: 0.8em; opacity: 0.8;">(1000鑽)</span>
                </button>
            </div>

            <div class="main-layout">
                <div class="game-area">
                    <div id="card-display-area" class="card-container"></div>
                </div>
                <div class="leaderboard-area">
                    <h3 style="margin-top:0; border-bottom:1px solid #555; padding-bottom:10px;">🏆 戰力排行榜</h3>
                    <div id="leaderboard-list">載入中...</div>
                </div>
            </div>
            
            <div class="studio-logo-container">
                <img id="studio-logo" src="assets/ui/studio_logo.webp" alt="Game Studio Logo" onerror="this.style.display='none'">
                <div style="font-size: 0.8em; color: #7f8c8d; margin-top: 5px;">© 2025 Game Studio. All rights reserved.</div>
            </div>
        </div>
    </div>

    <div id="gacha-overlay" class="hidden">
        <div id="summon-burst"></div>
        <div id="summon-circle"></div>
        <div id="summon-text" style="color: white; margin-top: 20px; font-size: 1.5em; font-weight: bold; z-index: 1002;">召喚中...</div>
        <button id="gacha-skip-btn" class="btn-secondary" style="margin-top: 30px; z-index: 1002; padding: 5px 15px; font-size: 0.9em; opacity: 0.8;">⏩ 跳過動畫</button>
    </div>

    <div id="gacha-reveal-modal" class="modal hidden">
        <div class="modal-content" style="background: transparent; border: none; align-items: center; justify-content: center; pointer-events: none;">
            <div id="gacha-reveal-container" style="pointer-events: auto;"></div>
            <div style="color: white; margin-top: 20px; text-shadow: 0 0 5px black; animation: pulse 1s infinite;">(點擊繼續)</div>
        </div>
    </div>

    <div id="inventory-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="inventory-title">🎒 我的背包</h2>
                <button id="close-inventory-btn" class="btn-danger btn-close-circle">X</button>
            </div>
            
            <div class="filter-bar">
                <button class="filter-btn active" data-filter="ALL">全部</button>
                <button class="filter-btn" data-filter="SSR">SSR</button>
                <button class="filter-btn" data-filter="SR">SR</button>
                <button class="filter-btn" data-filter="R">R</button>
                
                <button class="filter-btn" data-filter="INFANTRY">⚔️ 步兵</button>
                <button class="filter-btn" data-filter="CAVALRY">🐴 騎兵</button>
                <button class="filter-btn" data-filter="ARCHER">🏹 弓兵</button>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 0 10px;">
                <select id="sort-select" class="sort-dropdown">
                    <option value="time_desc">📅 獲得時間 (新→舊)</option>
                    <option value="time_asc">📅 獲得時間 (舊→新)</option>
                    <option value="rarity_desc">✨ 稀有度 (高→低)</option>
                    <option value="power_desc">💪 戰鬥力 (高→低)</option>
                    <option value="id_asc">🔢 編號 (小→大)</option>
                </select>
                
                <div style="display: flex; align-items: center;">
                    <button id="auto-star-btn" class="btn-secondary btn-star" style="font-size: 0.9em; padding: 5px 10px; margin-right: 10px;">⚡ 一鍵升星</button>
                    <button id="inventory-clear-btn" class="btn-secondary" style="font-size: 0.9em; padding: 5px 10px;">🗑️ 解除全軍</button>
                    <button id="batch-toggle-btn">🔧 批量分解</button>
                </div>
            </div>

            <div id="inventory-grid" class="card-container" style="justify-content: flex-start; align-content: flex-start;"></div>
            
            <div id="batch-action-bar" class="hidden">
                <div id="batch-info">已選 0 張</div>
                <button id="batch-confirm-btn" class="btn-disabled">確認分解</button>
            </div>
        </div>
    </div>

    <div id="gallery-modal" class="modal hidden">
        <div class="modal-content" style="background: #2c3e50; border-color: #3498db;">
            <div class="modal-header">
                <h2>📖 英雄圖鑑 <span id="gallery-progress" style="font-size: 0.6em; color: #f1c40f;">(0/0)</span></h2>
                <button id="close-gallery-btn" class="btn-danger btn-close-circle">X</button>
            </div>
            
            <div class="filter-bar" style="justify-content: center; gap: 5px; flex-wrap: wrap;">
                <button class="gallery-filter-btn active" data-filter="ALL">全部</button>
                <button class="gallery-filter-btn" data-filter="SSR">SSR</button>
                <button class="gallery-filter-btn" data-filter="SR">SR</button>
                <button class="gallery-filter-btn" data-filter="R">R</button>
                <button class="gallery-filter-btn" data-filter="INFANTRY">⚔️ 步兵</button>
                <button class="gallery-filter-btn" data-filter="CAVALRY">🐴 騎兵</button>
                <button class="gallery-filter-btn" data-filter="ARCHER">🏹 弓兵</button>
            </div>

            <div id="gallery-grid" class="card-container" style="justify-content: flex-start; align-content: flex-start;"></div>
        </div>
    </div>

    <div id="detail-modal" class="modal hidden">
        <div class="modal-content" style="width: auto; max-width: 95%; background: transparent; border: none; overflow: visible;">
            <button class="nav-arrow left" id="prev-card-btn">❮</button>
            <div id="large-card-view" class="large-card-container"></div>
            <button class="nav-arrow right" id="next-card-btn">❯</button>
            
            <div class="upgrade-controls">
                <button id="upgrade-level-btn" class="btn-upgrade">⬆️ 升級</button>
                <button id="upgrade-star-btn" class="btn-star">⭐ 升星</button>
            </div>
            <button id="dismantle-btn" class="btn-danger" style="margin-top: 10px; width: 100%; max-width: 320px;">♻️ 分解卡片</button>
            
            <button id="close-detail-btn" class="btn-close-circle" style="top: -20px; right: -20px;">X</button>
        </div>
    </div>

    <div id="settings-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 400px; height: auto;">
            <div class="modal-header"><h2>⚙️ 遊戲設定</h2></div>
            <div class="settings-body">
                <div class="setting-item">
                    <label>玩家暱稱</label>
                    <div style="display:flex; gap:5px;">
                        <input type="text" id="settings-name-input" placeholder="輸入新暱稱" style="flex:1;">
                        <button id="settings-save-name-btn" class="btn-mini">儲存</button>
                    </div>
                </div>
                <div class="setting-item">
                    <label>音效設定</label>
                    <div class="control-row">
                        <span>🎵 音樂 (BGM)</span>
                        <input type="checkbox" id="bgm-toggle" checked>
                        <input type="range" id="bgm-volume" min="0" max="1" step="0.1" value="0.5">
                    </div>
                    <div class="control-row">
                        <span>🔊 音效 (SFX)</span>
                        <input type="checkbox" id="sfx-toggle" checked>
                        <input type="range" id="sfx-volume" min="0" max="1" step="0.1" value="1.0">
                    </div>
                </div>
                <div class="setting-item">
                    <label>禮包碼兌換</label>
                    <div style="display:flex; gap:5px;">
                        <input type="text" id="redeem-code-input" placeholder="輸入序號" style="flex:1;">
                        <button id="redeem-btn" class="btn-secondary">兌換</button>
                    </div>
                </div>
            </div>
            <button id="close-settings-btn" class="btn-primary" style="margin-top:20px;">關閉</button>
        </div>
    </div>

    <div id="notification-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>📬 通知中心</h2>
                <button id="close-notification-btn" class="btn-danger btn-close-circle">X</button>
            </div>
            <div id="notification-list" style="flex:1; overflow-y:auto; padding:10px;">
                </div>
        </div>
    </div>

    <div id="territory-modal" class="modal hidden">
        <div class="modal-content" style="background: #2c3e50; border-color: #27ae60;">
            <div class="modal-header">
                <h2>🏰 我的領地</h2>
                <button id="close-territory-btn" class="btn-danger btn-close-circle">X</button>
            </div>
            
            <div class="resource-bar">
                <div class="res-item">🌾 糧食: <span id="res-food">0</span></div>
                <div class="res-item">⛏️ 鐵礦: <span id="res-iron">0</span></div>
                <div class="res-item">🪓 木材: <span id="res-wood">0</span></div>
            </div>

            <div class="modal-body" style="overflow-y: auto; flex: 1;">
                <div id="territory-grid" class="territory-container">
                    </div>
            </div>
        </div>
    </div>

    <div id="level-selection-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>⚔️ 選擇戰役關卡</h2>
                <button id="close-level-select-btn" class="btn-danger btn-close-circle">X</button>
            </div>
            <div class="level-grid">
                <div class="level-btn" data-level="1">
                    <div style="font-size: 2em;">🏯</div>
                    <div class="level-name">第1章：橫掃六國</div>
                </div>
                <div class="level-btn locked" data-level="2">
                    <div style="font-size: 2em;">🐎</div>
                    <div class="level-name">第2章：無敗之王</div>
                </div>
                <div class="level-btn locked" data-level="3">
                    <div style="font-size: 2em;">💣</div>
                    <div class="level-name">第3章：改變世界</div>
                </div>
                <div class="level-btn locked" data-level="4">
                    <div style="font-size: 2em;">⛺</div>
                    <div class="level-name">第4章：草原鐵蹄</div>
                </div>
                <div class="level-btn locked" data-level="5">
                    <div style="font-size: 2em;">🏛️</div>
                    <div class="level-name">第5章：羅馬征服</div>
                </div>
                <div class="level-btn locked" data-level="6">
                    <div style="font-size: 2em;">🐘</div>
                    <div class="level-name">第6章：戰象翻山</div>
                </div>
                <div class="level-btn locked" data-level="7">
                    <div style="font-size: 2em;">🐍</div>
                    <div class="level-name">第7章：帝國魅影</div>
                </div>
                <div class="level-btn locked" data-level="8">
                    <div style="font-size: 2em;">🗡️</div>
                    <div class="level-name">第8章：決戰巖流島</div>
                </div>
            </div>
        </div>
    </div>

    <div id="battle-screen" class="hidden">
        <div class="battle-header">
            <div class="battle-info">
                <span>⚔️ 存活: <span id="hero-count-display">0</span></span>
                <span id="wave-display-container" style="margin-left: 10px;">💀 波次: <span id="wave-count">1</span>/4</span>
                <span id="battle-gold-container" style="margin-left: 10px;">💰 <span id="battle-gold">0</span> G</span>
                <span style="margin-left: 10px; color: #f39c12;">🔥 <span id="current-battle-power">0</span></span>
            </div>
            <div id="difficulty-controls" style="display:flex; gap:5px;">
                <button class="difficulty-btn active" data-diff="easy" style="background:#27ae60;">簡單</button>
                <button class="difficulty-btn" data-diff="normal" style="background:#f39c12;">普通</button>
                <button class="difficulty-btn" data-diff="hard" style="background:#c0392b;">困難</button>
            </div>
            <div style="display:flex; gap:10px;">
                <button id="speed-btn" class="btn-mini" style="background:#8e44ad; font-size:1em; padding:5px 10px;">⏩ 1x</button>
                <button id="retreat-btn" class="btn-danger" style="padding: 5px 10px; font-size: 0.9em;">🏳️ 撤退</button>
            </div>
        </div>

        <div class="battle-content-wrapper" style="flex:1; display:flex; position:relative;">
            <div class="battle-field-container">
                <div id="wave-notification" class="hidden">第 1 波 來襲!</div>
                
                <div class="spawn-line left"></div>
                
                <div class="enemy-spawn-zone" style="position: absolute; right: 0; top: 0;">⚠️</div>

                <div class="lanes-wrapper">
                    <div class="lane-row" data-lane="0">
                        <div class="defense-slot" data-slot="0"><div class="slot-placeholder">+</div></div>
                        <div class="defense-slot" data-slot="1"><div class="slot-placeholder">+</div></div>
                        <div class="defense-slot" data-slot="2"><div class="slot-placeholder">+</div></div>
                    </div>
                    <div class="lane-row" data-lane="1">
                        <div class="defense-slot" data-slot="3"><div class="slot-placeholder">+</div></div>
                        <div class="defense-slot" data-slot="4"><div class="slot-placeholder">+</div></div>
                        <div class="defense-slot" data-slot="5"><div class="slot-placeholder">+</div></div>
                    </div>
                    <div class="lane-row" data-lane="2">
                        <div class="defense-slot" data-slot="6"><div class="slot-placeholder">+</div></div>
                        <div class="defense-slot" data-slot="7"><div class="slot-placeholder">+</div></div>
                        <div class="defense-slot" data-slot="8"><div class="slot-placeholder">+</div></div>
                    </div>
                </div>

                <div id="enemy-container"></div>
                <div id="hero-container"></div>
            </div>

            <div class="battle-monitor-sidebar collapsed">
                <h3 style="color:#ddd; font-size:0.9em; text-align:center; margin-bottom:10px; border-bottom:1px solid #555; padding-bottom:5px;">📊 戰況監控</h3>
                <div id="hero-monitor-list"></div>
                <hr style="border-color:#444; width:100%;">
                <div id="enemy-monitor-list"></div>
            </div>
            
            <button id="toggle-sidebar-btn" class="collapsed-pos">◀</button>
        </div>

        <div class="battle-deck">
            <div style="display:flex; justify-content: center; gap: 20px;">
                <button id="auto-deploy-btn" class="btn-secondary" style="font-size: 1.1em; padding: 10px 30px;">🤖 自動部署</button>
                <button id="start-battle-btn" class="btn-primary btn-disabled" style="font-size: 1.2em; padding: 10px 40px;">請先部署英雄</button>
                <button id="clear-deploy-btn" class="btn-secondary" style="background:#e74c3c;">🗑️ 清空</button>
            </div>
        </div>
    </div>

    <div id="battle-result-modal" class="modal hidden">
        <div class="result-content">
            <div id="result-title" class="result-title">VICTORY</div>
            <div id="result-gold" class="result-gold">💰 +0</div>
            <div id="result-gems" style="color:#2ecc71; font-weight:bold; margin-bottom:15px; display:none;">💎 +0</div>
            
            <div id="dps-chart" class="dps-container"></div>

            <button id="close-result-btn" class="btn-primary" style="margin-top: 20px; width: 100%;">確定</button>
        </div>
    </div>

    <div id="pvp-arena-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 800px; background: #2c3e50; border: 2px solid #8e44ad;">
            <div class="modal-header">
                <h2>🏆 競技場 (PVP)</h2>
                <button id="close-pvp-arena-btn" class="btn-danger btn-close-circle">X</button>
            </div>
            
            <div class="pvp-main-body" style="padding: 20px; text-align: center;">
                <div class="pvp-status-bar" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                    <div style="font-size: 1.2em; color: #f1c40f;">我的排名: <span id="my-pvp-rank">---</span></div>
                    <div style="margin-top: 5px;">戰績: <span id="pvp-win-count">0</span> 勝 / <span id="pvp-lose-count">0</span> 敗</div>
                </div>

                <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <button id="pvp-search-btn" class="btn-primary" style="padding: 20px 40px; font-size: 1.2em;">🔍 尋找對手 (消耗 100G)</button>
                    <button id="pvp-defense-setup-btn" class="btn-secondary" style="padding: 20px 40px; font-size: 1.2em; background: #27ae60;">🛡️ 設定防守陣容</button>
                </div>

                <div id="revenge-list-container" class="hidden" style="margin-top: 20px; text-align: left;">
                    <h3 style="border-bottom: 1px solid #555; padding-bottom: 5px;">⚔️ 復仇名單</h3>
                    <div id="revenge-list" style="max-height: 200px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="pvp-setup-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 900px; background: #34495e;">
            <div class="modal-header">
                <h2>🛡️ 設定防守陣容</h2>
                <button id="close-pvp-setup-btn" class="btn-danger btn-close-circle">X</button>
            </div>
            
            <div style="display: flex; flex-direction: column; height: 100%;">
                <div class="pvp-grid-container" style="flex: 1; display: flex; justify-content: center; align-items: center; margin: 20px 0;">
                    <div class="lanes-wrapper" style="width: 300px;">
                        <div class="lane-row">
                            <div class="defense-slot pvp-defense-slot" data-slot="0"><div class="slot-placeholder">+</div></div>
                            <div class="defense-slot pvp-defense-slot" data-slot="1"><div class="slot-placeholder">+</div></div>
                            <div class="defense-slot pvp-defense-slot" data-slot="2"><div class="slot-placeholder">+</div></div>
                        </div>
                        <div class="lane-row">
                            <div class="defense-slot pvp-defense-slot" data-slot="3"><div class="slot-placeholder">+</div></div>
                            <div class="defense-slot pvp-defense-slot" data-slot="4"><div class="slot-placeholder">+</div></div>
                            <div class="defense-slot pvp-defense-slot" data-slot="5"><div class="slot-placeholder">+</div></div>
                        </div>
                        <div class="lane-row">
                            <div class="defense-slot pvp-defense-slot" data-slot="6"><div class="slot-placeholder">+</div></div>
                            <div class="defense-slot pvp-defense-slot" data-slot="7"><div class="slot-placeholder">+</div></div>
                            <div class="defense-slot pvp-defense-slot" data-slot="8"><div class="slot-placeholder">+</div></div>
                        </div>
                    </div>
                </div>
                <div style="text-align: center;">
                    <button id="save-defense-team-btn" class="btn-primary" style="padding: 10px 50px;">💾 儲存並上傳</button>
                </div>
            </div>
        </div>
    </div>

    <div id="pvp-match-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 1000px; background: #2c3e50;">
            <div class="modal-header">
                <h2>⚔️ 準備進攻</h2>
                <button id="close-pvp-match-btn" class="btn-danger btn-close-circle">X</button>
            </div>
            
            <div id="pvp-match-content" style="display: flex; flex-direction: column; gap: 20px; padding: 10px;">
                <div class="vs-container">
                    <div class="player-card self">
                        <div class="p-name" id="p1-name">我方</div>
                        <div class="p-power" id="p1-power">戰力: 0</div>
                    </div>
                    <div style="font-size: 2em; font-weight: bold; color: #f1c40f;">VS</div>
                    <div class="player-card enemy">
                        <div class="p-name" id="p2-name">對手</div>
                        <div class="p-power" id="p2-power">戰力: ???</div>
                        <div style="font-size:0.8em; color:#e74c3c;">(可奪取: <span id="p2-gold">?</span> G)</div>
                    </div>
                </div>

                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
                    <div class="enemy-preview">
                        <h3 style="color: #e74c3c; text-align: center;">敵方佈陣</h3>
                        <div class="lanes-wrapper" style="width: 250px; pointer-events: none; opacity: 0.9;">
                            <div class="lane-row" id="enemy-row-0"></div>
                            <div class="lane-row" id="enemy-row-1"></div>
                            <div class="lane-row" id="enemy-row-2"></div>
                        </div>
                    </div>

                    <div class="my-attack-setup">
                        <h3 style="color: #3498db; text-align: center;">我方進攻</h3>
                        <div class="lanes-wrapper" style="width: 250px;">
                            <div class="lane-row">
                                <div class="defense-slot pvp-attack-slot" data-slot="0"><div class="slot-placeholder">+</div></div>
                                <div class="defense-slot pvp-attack-slot" data-slot="1"><div class="slot-placeholder">+</div></div>
                                <div class="defense-slot pvp-attack-slot" data-slot="2"><div class="slot-placeholder">+</div></div>
                            </div>
                            <div class="lane-row">
                                <div class="defense-slot pvp-attack-slot" data-slot="3"><div class="slot-placeholder">+</div></div>
                                <div class="defense-slot pvp-attack-slot" data-slot="4"><div class="slot-placeholder">+</div></div>
                                <div class="defense-slot pvp-attack-slot" data-slot="5"><div class="slot-placeholder">+</div></div>
                            </div>
                            <div class="lane-row">
                                <div class="defense-slot pvp-attack-slot" data-slot="6"><div class="slot-placeholder">+</div></div>
                                <div class="defense-slot pvp-attack-slot" data-slot="7"><div class="slot-placeholder">+</div></div>
                                <div class="defense-slot pvp-attack-slot" data-slot="8"><div class="slot-placeholder">+</div></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button id="back-to-list-btn" class="btn-secondary" style="flex: 1;">⬅️ 返回列表</button>
                    <button id="save-attack-team-btn" class="btn-secondary" style="flex: 1; background: #8e44ad;">💾 儲存陣容</button> 
                    <button id="start-pvp-battle-btn" class="btn-danger" style="flex: 2; font-size: 1.2em;">⚔️ 開戰 (奪取 5% 金幣)</button>
                </div>
            </div>
        </div>
    </div>

<script type="module" src="js/territory.js"></script>
<script type="module" src="js/inventory.js"></script>
<script type="module" src="main.js"></script>
</body>
</html>